sudo: false
language: python
matrix:
  include:
  - python: "2.7"
    env:
      - PYTHON_CONFIGURE_OPTS="--enable-unicode=ucs2"
    before_install:
      - eval "$(pyenv init -)"
      - pyenv install -f 2.7.14
      - pyenv global 2.7.14
      - pip install --upgrade --force-reinstall setuptools
  - python: "2.7"
  - python: "3.4"
  - python: "3.5"
  - python: "3.6"
  - python: "3.7-dev"
  - python: pypy
  - python: pypy3
install:
  - pip install -r requirements-travis.txt
  - pip install --process-dependency-links -e .
script: pytest
cache: pip
after_success: make coveralls
notifications:
  email:
    - paultag@gmail.com
  irc:
    channels:
      - "irc.freenode.net#woo-city-commits"
      - "irc.freenode.net#hy"
    on_success: change
    on_failure: change
    use_notice: false
